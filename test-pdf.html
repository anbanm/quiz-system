<!DOCTYPE html>
<html>
<head>
    <title>Test jsPDF Loading</title>
    <script src="src/frontend/js/jspdf.min.js"></script>
</head>
<body>
    <h1>Test jsPDF Loading</h1>
    <button onclick="testPDF()">Test PDF Generation</button>
    <button onclick="checkGlobals()">Check Global Variables</button>
    
    <script>
        function checkGlobals() {
            console.log('window.jsPDF:', typeof window.jsPDF);
            console.log('window.jspdf:', typeof window.jspdf);
            if (window.jspdf) {
                console.log('window.jspdf.jsPDF:', typeof window.jspdf.jsPDF);
                console.log('window.jspdf keys:', Object.keys(window.jspdf));
            }
            
            // List all PDF-related globals
            const pdfGlobals = Object.keys(window).filter(k => k.toLowerCase().includes('pdf'));
            console.log('PDF-related globals:', pdfGlobals);
            
            // Try to find jsPDF in global scope
            if (typeof jsPDF !== 'undefined') {
                console.log('Global jsPDF found:', typeof jsPDF);
            }
            
            // Check if it's in a different location
            ['window', 'self', 'global'].forEach(scope => {
                try {
                    const scopeObj = eval(scope);
                    if (scopeObj && scopeObj.jsPDF) {
                        console.log(`Found jsPDF in ${scope}:`, typeof scopeObj.jsPDF);
                    }
                } catch (e) {}
            });
            
            alert('Check console for jsPDF detection info');
        }
        
        function testPDF() {
            try {
                let jsPDF;
                if (typeof window.jspdf !== 'undefined' && window.jspdf.jsPDF) {
                    jsPDF = window.jspdf.jsPDF;
                } else if (typeof window.jsPDF !== 'undefined') {
                    jsPDF = window.jsPDF;
                } else {
                    throw new Error('jsPDF not found');
                }
                
                const doc = new jsPDF();
                doc.text("Hello World!", 10, 10);
                doc.save("test.pdf");
                alert('PDF generated successfully!');
            } catch (error) {
                alert('Error: ' + error.message);
                console.error(error);
            }
        }
    </script>
</body>
</html>